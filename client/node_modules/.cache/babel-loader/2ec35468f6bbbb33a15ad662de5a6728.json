{"ast":null,"code":"import axios from 'axios';\nimport { setAlert } from '../actions/alert';\nimport { GET_PROFILE, CREATE_PROFILE, GET_REPOS, UPDATE_PROFILE, GET_PROFILES, CLEAR_PROFILE, ACCOUNT_DELETED, PROFILE_ERROR } from './types'; // Get current users profile\n\nexport const loadProfile = () => async dispatch => {\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile/me');\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Create and Update profile\n\nexport const createProfile = (formData, history, imageProfile, edit = false) => async dispatch => {\n  try {\n    dispatch(removeAlert());\n    const res = await axios.post('http://localhost:5000/api/profile', formData);\n    dispatch({\n      type: CREATE_PROFILE,\n      payload: res.data\n    });\n\n    if (imageProfile.has('imageProfile')) {\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      await axios.post(\"http://localhost:5000/api/profile/upload\", imageProfile, config);\n    }\n\n    if (!edit) {\n      dispatch(setAlert(\"Profile created\", 'success'));\n      history.push('/dashboard');\n    } else {\n      dispatch(setAlert(\"Profile edited\", 'success'));\n    }\n  } catch (err) {\n    if (err.response.data.errors) {\n      const errors = err.response.data;\n      dispatch(setAlert(errors.errors[0].msg, 'danger'));\n    } else {\n      const str = err.response.data;\n      let newErr = str.substring(str.lastIndexOf(\"Error:\") + 7, str.indexOf(\"<br>\"));\n      dispatch(setAlert(newErr, 'danger'));\n    }\n  }\n}; // Add Experince\n\nexport const addExperience = (formData, history) => async dispatch => {\n  try {\n    dispatch(removeAlert());\n    const res = await axios.put('http://localhost:5000/api/profile/experience', formData);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Experience added\", 'success'));\n    history.push('/dashboard');\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      dispatch(setAlert(errors[0].msg, 'danger'));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Add Education\n\nexport const addEducation = (formData, history) => async dispatch => {\n  try {\n    dispatch(removeAlert());\n    const res = await axios.put('http://localhost:5000/api/profile/education', formData);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Education added\", 'success'));\n    history.push('/dashboard');\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      dispatch(setAlert(errors[0].msg, 'danger'));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Delete Experince\n\nexport const deleteExperience = expId => async dispatch => {\n  try {\n    dispatch(removeAlert());\n    const res = await axios.delete('http://localhost:5000/api/profile/experience/' + expId);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Experience deleted\", 'success'));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Delete Education\n\nexport const deleteEducation = eduId => async dispatch => {\n  try {\n    dispatch(removeAlert());\n    const res = await axios.delete('http://localhost:5000/api/profile/education/' + eduId);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Education deleted\", 'success'));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n};\nexport const deleteAccount = () => async dispatch => {\n  if (window.confirm(`Are you sure you want to delete your account? After that you can't UNDO operation`)) {\n    try {\n      await axios.delete('http://localhost:5000/api/profile');\n      dispatch({\n        type: CLEAR_PROFILE\n      });\n      dispatch({\n        type: ACCOUNT_DELETED\n      });\n    } catch (err) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: {\n          msg: err.response.statusText,\n          status: err.response.status\n        }\n      });\n    }\n  }\n}; // Get all profiles\n\nexport const getProfiles = () => async dispatch => {\n  dispatch({\n    type: CLEAR_PROFILE\n  });\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile');\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Get profile by id\n\nexport const getProfileById = profileId => async dispatch => {\n  dispatch({\n    type: CLEAR_PROFILE\n  });\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile/user/' + profileId);\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Get repos of user\n\nexport const getGithubRepos = profileId => async dispatch => {\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile/github/' + profileId);\n    dispatch({\n      type: GET_REPOS,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n};","map":{"version":3,"sources":["D:/DevConnectors/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","CREATE_PROFILE","GET_REPOS","UPDATE_PROFILE","GET_PROFILES","CLEAR_PROFILE","ACCOUNT_DELETED","PROFILE_ERROR","loadProfile","dispatch","res","get","type","payload","data","err","msg","response","statusText","status","createProfile","formData","history","imageProfile","edit","removeAlert","post","has","config","headers","push","errors","str","newErr","substring","lastIndexOf","indexOf","addExperience","put","addEducation","deleteExperience","expId","delete","deleteEducation","eduId","deleteAccount","window","confirm","getProfiles","getProfileById","profileId","getGithubRepos"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport {setAlert} from '../actions/alert'\r\nimport {\r\n   GET_PROFILE,\r\n   CREATE_PROFILE,\r\n   GET_REPOS,\r\n   UPDATE_PROFILE,\r\n   GET_PROFILES,\r\n   CLEAR_PROFILE,\r\n   ACCOUNT_DELETED,\r\n   PROFILE_ERROR\r\n} from './types';\r\n\r\n// Get current users profile\r\nexport const loadProfile = () => async dispatch => {\r\n    try{\r\n       const res = await axios.get('http://localhost:5000/api/profile/me')\r\n       dispatch({\r\n           type: GET_PROFILE,\r\n           payload: res.data\r\n       })\r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n\r\n}\r\n\r\n// Create and Update profile\r\n\r\nexport const createProfile = (formData, history , imageProfile,edit = false) => async dispatch => {\r\n    try{\r\n       dispatch( \r\n        removeAlert()\r\n        ) \r\n       const res = await axios.post('http://localhost:5000/api/profile',formData)\r\n       dispatch({\r\n           type: CREATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n       if(imageProfile.has('imageProfile')){\r\n        const config = {\r\n            headers: {\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n        };\r\n         await axios.post(\"http://localhost:5000/api/profile/upload\",imageProfile,config)\r\n       }\r\n\r\n       if(!edit){\r\n        dispatch(setAlert(\"Profile created\",'success'))\r\n        history.push('/dashboard')\r\n        }\r\n        else{\r\n        dispatch(setAlert(\"Profile edited\",'success'))\r\n        }\r\n    }\r\n    catch(err){\r\n        if(err.response.data.errors){\r\n            const errors=err.response.data\r\n            dispatch(setAlert(errors.errors[0].msg,'danger'))\r\n        }\r\n        else{\r\n            const str = err.response.data\r\n            let newErr=str.substring(str.lastIndexOf(\"Error:\")+7,str.indexOf(\"<br>\"))\r\n            dispatch(setAlert(newErr,'danger'))\r\n        }\r\n    }   \r\n\r\n}\r\n\r\n// Add Experince\r\nexport const addExperience = (formData,history) => async dispatch => {\r\n    try{\r\n\r\n       dispatch( \r\n            removeAlert()\r\n        ) \r\n       const res = await axios.put('http://localhost:5000/api/profile/experience',formData)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Experience added\",'success'))\r\n        history.push('/dashboard')\r\n    \r\n    }\r\n    catch(err){\r\n        const errors = err.response.data.errors;\r\n        \r\n        if(errors){\r\n        dispatch(setAlert(errors[0].msg,'danger'))\r\n        }\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\n// Add Education\r\nexport const addEducation = (formData,history) => async dispatch => {\r\n    try{\r\n       dispatch( \r\n            removeAlert()\r\n        ) \r\n       const res = await axios.put('http://localhost:5000/api/profile/education',formData)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Education added\",'success'))\r\n        history.push('/dashboard')\r\n    \r\n    }\r\n    catch(err){\r\n        const errors = err.response.data.errors;\r\n        if(errors){\r\n        dispatch(setAlert(errors[0].msg,'danger'))\r\n        }\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\n// Delete Experince\r\nexport const deleteExperience = (expId) => async dispatch => {\r\n    try{\r\n        dispatch( \r\n            removeAlert()\r\n        ) \r\n       const res = await axios.delete('http://localhost:5000/api/profile/experience/'+expId)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Experience deleted\",'success'))\r\n    \r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\n// Delete Education\r\nexport const deleteEducation = (eduId) => async dispatch => {\r\n    try{\r\n       dispatch( \r\n            removeAlert()\r\n        ) \r\n       const res = await axios.delete('http://localhost:5000/api/profile/education/'+eduId)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Education deleted\",'success'))\r\n    \r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\nexport const deleteAccount = () => async dispatch => {\r\n        if(window.confirm(`Are you sure you want to delete your account? After that you can't UNDO operation`)){\r\n            try{\r\n                await axios.delete('http://localhost:5000/api/profile')\r\n                dispatch({type: CLEAR_PROFILE})\r\n                dispatch({type: ACCOUNT_DELETED})\r\n            }\r\n            catch(err){\r\n                dispatch({\r\n                    type: PROFILE_ERROR,\r\n                    payload: {msg : err.response.statusText, status:err.response.status}\r\n                });\r\n            }  \r\n        } \r\n}\r\n// Get all profiles\r\nexport const getProfiles = () => async dispatch => {\r\n        dispatch({type: CLEAR_PROFILE})\r\n        try{\r\n        const res = await axios.get('http://localhost:5000/api/profile')\r\n            dispatch({\r\n                type: GET_PROFILES,\r\n                payload: res.data\r\n            })\r\n        }\r\n        catch(err){\r\n            dispatch({\r\n                type: PROFILE_ERROR,\r\n                payload: {msg : err.response.statusText, status:err.response.status}\r\n            });\r\n        }  \r\n}\r\n\r\n// Get profile by id\r\nexport const getProfileById = (profileId) => async dispatch => {\r\n    dispatch({type: CLEAR_PROFILE})\r\n    try{\r\n    const res = await axios.get('http://localhost:5000/api/profile/user/'+profileId)\r\n\r\n        dispatch({\r\n            type: GET_PROFILE,\r\n            payload: res.data\r\n        })\r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }  \r\n}\r\n\r\n// Get repos of user\r\nexport const getGithubRepos = (profileId) => async dispatch => {\r\n    try{\r\n    const res = await axios.get('http://localhost:5000/api/profile/github/'+profileId)\r\n        dispatch({\r\n            type: GET_REPOS,\r\n            payload: res.data\r\n        })\r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }  \r\n}\r\n"]},"metadata":{},"sourceType":"module"}