{"ast":null,"code":"import axios from 'axios';\nimport { setAlert, removeAlert } from '../actions/alert';\nimport { GET_PROFILE, CREATE_PROFILE, GET_REPOS, UPDATE_PROFILE, GET_PROFILES, CLEAR_PROFILE, ACCOUNT_DELETED, PROFILE_ERROR } from './types'; // Get current users profile\n\nexport const loadProfile = () => async dispatch => {\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile/me');\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err.response);\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Create and Update profile\n\nexport const createProfile = (formData, history, imageProfile, edit = false) => async dispatch => {\n  try {\n    const res = await axios.post('http://localhost:5000/api/profile', formData);\n    dispatch({\n      type: CREATE_PROFILE,\n      payload: res.data\n    });\n\n    if (formData.has('imageProfile')) {\n      const config = {\n        headers: {\n          'content-type': 'multipart/form-data'\n        }\n      };\n      const res = await axios.post(\"http://localhost:5000/api/profile/upload\", imageProfile, config);\n    }\n\n    if (!edit) {\n      dispatch(setAlert(\"Profile created\", 'success'));\n      history.push('/dashboard');\n    } else {\n      dispatch(setAlert(\"Profile edited\", 'success'));\n    }\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (typeof err.response.data === 'undefined') {\n      dispatch(setAlert(errors[0].msg, 'danger'));\n    } else {\n      const str = err.response.data;\n      err = str.substring(str.lastIndexOf(\"Error:\") + 7, str.indexOf(\"<br>\"));\n      dispatch(setAlert(err, 'danger'));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Add Experince\n\nexport const addExperience = (formData, history) => async dispatch => {\n  try {\n    const res = await axios.put('http://localhost:5000/api/profile/experience', formData);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Experience added\", 'success'));\n    history.push('/dashboard');\n  } catch (err) {\n    const errors = err.response.data.errors;\n\n    if (errors) {\n      dispatch(setAlert(errors[0].msg, 'danger'));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Add Education\n\nexport const addEducation = (formData, history) => async dispatch => {\n  try {\n    const res = await axios.put('http://localhost:5000/api/profile/education', formData);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Education added\", 'success'));\n    history.push('/dashboard');\n  } catch (err) {\n    const errors = err.response.data.errors;\n    console.log(err.response);\n\n    if (errors) {\n      dispatch(setAlert(errors[0].msg, 'danger'));\n    }\n\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Delete Experince\n\nexport const deleteExperience = expId => async dispatch => {\n  try {\n    const res = await axios.delete('http://localhost:5000/api/profile/experience/' + expId);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Experience deleted\", 'success'));\n  } catch (err) {\n    console.log(err.response);\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Delete Education\n\nexport const deleteEducation = eduId => async dispatch => {\n  try {\n    const res = await axios.delete('http://localhost:5000/api/profile/education/' + eduId);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(\"Education deleted\", 'success'));\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n};\nexport const deleteAccount = () => async dispatch => {\n  if (window.confirm(`Are you sure you want to delete your account? After that you can't UNDO operation`)) {\n    try {\n      await axios.delete('http://localhost:5000/api/profile');\n      dispatch({\n        type: CLEAR_PROFILE\n      });\n      dispatch({\n        type: ACCOUNT_DELETED\n      });\n    } catch (err) {\n      dispatch({\n        type: PROFILE_ERROR,\n        payload: {\n          msg: err.response.statusText,\n          status: err.response.status\n        }\n      });\n    }\n  }\n}; // Get all profiles\n\nexport const getProfiles = () => async dispatch => {\n  dispatch({\n    type: CLEAR_PROFILE\n  });\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile');\n    console.log(res);\n    dispatch({\n      type: GET_PROFILES,\n      payload: res.data\n    });\n  } catch (err) {\n    console.log(err);\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Get profile by id\n\nexport const getProfileById = profileId => async dispatch => {\n  dispatch({\n    type: CLEAR_PROFILE\n  });\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile/' + profileId);\n    dispatch({\n      type: GET_PROFILE,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Get repos of user\n\nexport const getGithubRepos = profileId => async dispatch => {\n  dispatch({\n    type: CLEAR_PROFILE\n  });\n\n  try {\n    const res = await axios.get('http://localhost:5000/api/profile/github' + profileId);\n    dispatch({\n      type: GET_REPOS,\n      payload: res.data\n    });\n  } catch (err) {\n    dispatch({\n      type: PROFILE_ERROR,\n      payload: {\n        msg: err.response.statusText,\n        status: err.response.status\n      }\n    });\n  }\n}; // Create profile pictrue\n\nexport const uploadProfilePicture = (imageProfile, edit = false) => async dispatch => {\n  try {\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    const res = await axios.post(\"http://localhost:5000/api/profile/upload\", imageProfile, config);\n    dispatch({\n      type: UPDATE_PROFILE,\n      payload: res.data\n    });\n    dispatch(setAlert(edit ? \"Profile update\" : \"Profile created\", 'success'));\n  } catch (err) {\n    const str = err.response.data;\n    err = str.substring(str.lastIndexOf(\"Error:\") + 7, str.indexOf(\"<br>\"));\n    dispatch(setAlert(err, 'danger'));\n  }\n};","map":{"version":3,"sources":["D:/DevConnectors/client/src/actions/profile.js"],"names":["axios","setAlert","removeAlert","GET_PROFILE","CREATE_PROFILE","GET_REPOS","UPDATE_PROFILE","GET_PROFILES","CLEAR_PROFILE","ACCOUNT_DELETED","PROFILE_ERROR","loadProfile","dispatch","res","get","type","payload","data","err","console","log","response","msg","statusText","status","createProfile","formData","history","imageProfile","edit","post","has","config","headers","push","errors","str","substring","lastIndexOf","indexOf","addExperience","put","addEducation","deleteExperience","expId","delete","deleteEducation","eduId","deleteAccount","window","confirm","getProfiles","getProfileById","profileId","getGithubRepos","uploadProfilePicture"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport {setAlert,removeAlert} from '../actions/alert'\r\nimport {\r\n   GET_PROFILE,\r\n   CREATE_PROFILE,\r\n   GET_REPOS,\r\n   UPDATE_PROFILE,\r\n   GET_PROFILES,\r\n   CLEAR_PROFILE,\r\n   ACCOUNT_DELETED,\r\n   PROFILE_ERROR\r\n} from './types';\r\n\r\n// Get current users profile\r\nexport const loadProfile = () => async dispatch => {\r\n    try{\r\n       const res = await axios.get('http://localhost:5000/api/profile/me')\r\n       dispatch({\r\n           type: GET_PROFILE,\r\n           payload: res.data\r\n       })\r\n    }\r\n    catch(err){\r\n        console.log(err.response)\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n\r\n}\r\n\r\n// Create and Update profile\r\n\r\nexport const createProfile = (formData, history , imageProfile,edit = false) => async dispatch => {\r\n    try{\r\n       const res = await axios.post('http://localhost:5000/api/profile',formData)\r\n       dispatch({\r\n           type: CREATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       if(formData.has('imageProfile')){\r\n        const config = {\r\n            headers: {\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n        };\r\n       const res =  await axios.post(\"http://localhost:5000/api/profile/upload\",imageProfile,config)\r\n       }\r\n\r\n       if(!edit){\r\n        dispatch(setAlert(\"Profile created\",'success'))\r\n        history.push('/dashboard')\r\n        }\r\n        else{\r\n        dispatch(setAlert(\"Profile edited\",'success'))\r\n        }\r\n    }\r\n    catch(err){\r\n        const errors = err.response.data.errors;\r\n        if(typeof err.response.data === 'undefined'){\r\n            dispatch(setAlert(errors[0].msg,'danger'))\r\n        }\r\n        else{\r\n            const str = err.response.data\r\n            err=str.substring(str.lastIndexOf(\"Error:\")+7,str.indexOf(\"<br>\"))\r\n            dispatch(setAlert(err,'danger'))\r\n        }\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n\r\n}\r\n\r\n// Add Experince\r\nexport const addExperience = (formData,history) => async dispatch => {\r\n    try{\r\n       const res = await axios.put('http://localhost:5000/api/profile/experience',formData)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Experience added\",'success'))\r\n        history.push('/dashboard')\r\n    \r\n    }\r\n    catch(err){\r\n        const errors = err.response.data.errors;\r\n        \r\n        if(errors){\r\n        dispatch(setAlert(errors[0].msg,'danger'))\r\n        }\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\n// Add Education\r\nexport const addEducation = (formData,history) => async dispatch => {\r\n    try{\r\n       const res = await axios.put('http://localhost:5000/api/profile/education',formData)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Education added\",'success'))\r\n        history.push('/dashboard')\r\n    \r\n    }\r\n    catch(err){\r\n        const errors = err.response.data.errors;\r\n        console.log(err.response)\r\n        if(errors){\r\n        dispatch(setAlert(errors[0].msg,'danger'))\r\n        }\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\n// Delete Experince\r\nexport const deleteExperience = (expId) => async dispatch => {\r\n    try{\r\n       const res = await axios.delete('http://localhost:5000/api/profile/experience/'+expId)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Experience deleted\",'success'))\r\n    \r\n    }\r\n    catch(err){\r\n        console.log(err.response)\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\n// Delete Education\r\nexport const deleteEducation = (eduId) => async dispatch => {\r\n    try{\r\n       const res = await axios.delete('http://localhost:5000/api/profile/education/'+eduId)\r\n       dispatch({\r\n           type:UPDATE_PROFILE,\r\n           payload: res.data\r\n       })\r\n\r\n       dispatch(setAlert(\"Education deleted\",'success'))\r\n    \r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }   \r\n}\r\n\r\nexport const deleteAccount = () => async dispatch => {\r\n        if(window.confirm(`Are you sure you want to delete your account? After that you can't UNDO operation`)){\r\n            try{\r\n                await axios.delete('http://localhost:5000/api/profile')\r\n                dispatch({type: CLEAR_PROFILE})\r\n                dispatch({type: ACCOUNT_DELETED})\r\n            }\r\n            catch(err){\r\n                dispatch({\r\n                    type: PROFILE_ERROR,\r\n                    payload: {msg : err.response.statusText, status:err.response.status}\r\n                });\r\n            }  \r\n        } \r\n}\r\n// Get all profiles\r\nexport const getProfiles = () => async dispatch => {\r\n        dispatch({type: CLEAR_PROFILE})\r\n        try{\r\n        const res = await axios.get('http://localhost:5000/api/profile')\r\n        console.log(res)\r\n            dispatch({\r\n                type: GET_PROFILES,\r\n                payload: res.data\r\n            })\r\n        }\r\n        catch(err){\r\n            console.log(err)\r\n            dispatch({\r\n                type: PROFILE_ERROR,\r\n                payload: {msg : err.response.statusText, status:err.response.status}\r\n            });\r\n        }  \r\n}\r\n\r\n// Get profile by id\r\nexport const getProfileById = (profileId) => async dispatch => {\r\n    dispatch({type: CLEAR_PROFILE})\r\n    try{\r\n    const res = await axios.get('http://localhost:5000/api/profile/'+profileId)\r\n\r\n        dispatch({\r\n            type: GET_PROFILE,\r\n            payload: res.data\r\n        })\r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }  \r\n}\r\n\r\n// Get repos of user\r\nexport const getGithubRepos = (profileId) => async dispatch => {\r\n    dispatch({type: CLEAR_PROFILE})\r\n    try{\r\n    const res = await axios.get('http://localhost:5000/api/profile/github'+profileId)\r\n        dispatch({\r\n            type: GET_REPOS,\r\n            payload: res.data\r\n        })\r\n    }\r\n    catch(err){\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg : err.response.statusText, status:err.response.status}\r\n        });\r\n    }  \r\n}\r\n\r\n// Create profile pictrue\r\nexport const uploadProfilePicture = (imageProfile,edit = false) => async dispatch => {\r\n    try{\r\n        const config = {\r\n            headers: {\r\n                'content-type': 'multipart/form-data'\r\n            }\r\n        };\r\n       const res =  await axios.post(\"http://localhost:5000/api/profile/upload\",imageProfile,config)\r\n        dispatch({\r\n            type:UPDATE_PROFILE,\r\n            payload: res.data\r\n        })\r\n        dispatch(setAlert(edit ? \"Profile update\" : \"Profile created\",'success'))\r\n    }\r\n    catch(err){\r\n        const str=err.response.data\r\n        err=str.substring(str.lastIndexOf(\"Error:\")+7,str.indexOf(\"<br>\"))\r\n        dispatch(setAlert(err,'danger'))\r\n    }  \r\n}"]},"metadata":{},"sourceType":"module"}